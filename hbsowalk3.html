<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- This style sheet is necessary for the intro.js text blocks to work. -->
<link rel="stylesheet" type="text/css" href="https://acegielski.github.io/introjs.css" />
<!-- So is this script. -->
<script src="https://acegielski.github.io/intro_accessible.js"></script>

<script>
  $(document).ready(function(){
    
    /*****************************************************
    * This section enables the intro.js text blocks.
    * They're set in the addNavData() function below.
    *****************************************************/

    addNavData();
    
    $('#navmaker').on('click tap', function(event){
        event.preventDefault();
        introJs().start();
    });
    
    // End of intro.js code.
    
  });
  
  /**************************************************************
  * This function adds the data needed for the intro.js text blocks.
  * You can change the text if you want.
  **************************************************************/
  function addNavData(){
    let navmaker = $('#navmaker');
    navmaker.attr("data-step", "1");
    navmaker.attr("data-intro", "View the code annotation. Click on the 'next' button or press the right arrow key to continue. Press 'escape' or click 'done' to quit this tour.");
    navmaker.attr("data-position", "bottom");

    let x1 = $('#x1');
    x1.attr("data-step", "2");
   	x1.attr("data-intro", "	We’ll store our collapsed data in a new object, called bark.data.grouped.");
    x1.attr("data-position", "bottom");

    let x2 = $('#x2');
    x2.attr("data-step", "3");
    x2.attr("data-intro", "The aggregate() function helps us collapse the data. It takes three arguments:");
    x2.attr("data-position", "bottom");

    let x3 = $('#x3');
    x3.attr("data-step", "4");
    x3.attr("data-intro", "The columns of the data we want to collapse - in this case, `Sales` and `Target`.");
    x3.attr("data-position", "bottom");
    
    let x4 = $('#x4');
    x4.attr("data-step", "5");
    x4.attr("data-intro", "The variables that form the groups we are collapsing together. We want to sum rows that share the same `StoreID`, `Year`, and `Period`");
    x4.attr("data-position", "bottom");

    let x5 = $('#x5');
    x5.attr("data-step", "6");
    x5.attr("data-intro", "The function we want to use to aggregate the columns. Here, we’re choosing sum. If we wanted to collapse based on the average values, we could have used ‘mean’ here instead.");
    x5.attr("data-position", "bottom");

  }
</script>




<p><i>See code annotation.</i></p>

<p><button id="navmaker" style="color: white; padding: 6px; font-size: 16px; background-color: #009b00; text-shadow: none; background-image: none;">What does it all mean?</button></p>

<code><p><span id="x1">bark.data.grouped</span> = <span id="x2">aggregate(</span><span id="x3">bark.data[,c("Sales", "Target")]</span>, 
                              <span id="x4">by = list("StoreID" = bark.data$StoreID, "Year" = bark.data$Year, "Period" = bark.data$Period)</span>, 
                              <span id="x5">sum)</span>


</code>








